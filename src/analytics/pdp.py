"""
Personal Development Plan (PDP) ‚Äî –º–æ—â–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è.

–í–∫–ª—é—á–∞–µ—Ç:
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ –Ω–∞ 30/60/90 –¥–Ω–µ–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–∫–Ω–∏–≥–∏, –∫—É—Ä—Å—ã, –ø—Ä–∞–∫—Ç–∏–∫–∏, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
- –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Ä–æ–ª–∏ –∏ —É—Ä–æ–≤–Ω—é –æ–ø—ã—Ç–∞
"""
from dataclasses import dataclass, field
from typing import Optional

from src.ai.answer_analyzer import ALL_METRICS, METRIC_NAMES_RU


# ========================================
# –ë–ê–ó–ê –†–ï–°–£–†–°–û–í –î–õ–Ø –†–ê–ó–í–ò–¢–ò–Ø
# ========================================

@dataclass
class Resource:
    """–†–µ—Å—É—Ä—Å –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è."""
    type: str  # book / course / practice / tool / article / community
    title: str
    author: str = ""
    url: str = ""
    description: str = ""
    duration: str = ""  # "2 —á–∞—Å–∞" / "4 –Ω–µ–¥–µ–ª–∏" / "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ"
    difficulty: str = "medium"  # easy / medium / hard
    language: str = "ru"  # ru / en
    free: bool = False
    priority: int = 1  # 1 = –≤—ã—Å—à–∏–π


@dataclass
class DevelopmentAction:
    """–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è."""
    action: str  # –ß—Ç–æ –¥–µ–ª–∞—Ç—å
    why: str  # –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ
    how: str  # –ö–∞–∫ —ç—Ç–æ –¥–µ–ª–∞—Ç—å
    duration: str  # –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç
    frequency: str  # –ö–∞–∫ —á–∞—Å—Ç–æ: "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ" / "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ" / "—Ä–∞–∑–æ–≤–æ"
    metric: str  # –ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å —É—Å–ø–µ—Ö
    priority: int = 1  # 1-3


@dataclass 
class DevelopmentGoal:
    """–¶–µ–ª—å —Ä–∞–∑–≤–∏—Ç–∏—è –ø–æ –º–µ—Ç—Ä–∏–∫–µ."""
    metric: str
    metric_name: str
    current_score: float
    target_score: float
    gap: float
    priority: str  # high / medium / low
    priority_reason: str
    actions: list[DevelopmentAction] = field(default_factory=list)
    resources: list[Resource] = field(default_factory=list)
    timeline: str = "30 –¥–Ω–µ–π"


@dataclass
class PersonalDevelopmentPlan:
    """–ü–æ–ª–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è."""
    
    # –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    role: str
    role_name: str
    experience: str
    experience_name: str
    total_score: int
    
    # –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∏ —Ñ–æ–∫—É—Å (—Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏ –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è)
    overall_assessment: str = ""  # –ö—Ä–∞—Ç–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —É—Ä–æ–≤–Ω—è
    main_focus: str = ""  # –ì–ª–∞–≤–Ω—ã–π —Ñ–æ–∫—É—Å —Ä–∞–∑–≤–∏—Ç–∏—è
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–ª–∏ (—Ç–æ–ø-3)
    primary_goals: list[DevelopmentGoal] = field(default_factory=list)
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏ (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã —Ä–æ—Å—Ç–∞)
    secondary_goals: list[DevelopmentGoal] = field(default_factory=list)
    
    # –ü–ª–∞–Ω –ø–æ —Å—Ä–æ–∫–∞–º
    plan_30_days: list[str] = field(default_factory=list)  # Quick wins
    plan_60_days: list[str] = field(default_factory=list)  # Deeper work
    plan_90_days: list[str] = field(default_factory=list)  # Mastery
    
    # –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
    success_metrics: list[str] = field(default_factory=list)
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É –æ–±—É—á–µ–Ω–∏—è
    learning_style_tips: list[str] = field(default_factory=list)
    
    # –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    motivation_message: str = ""


# ========================================
# –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô: –†–ï–°–£–†–°–´ –ü–û –ú–ï–¢–†–ò–ö–ê–ú
# ========================================

RESOURCES_DB = {
    # === HARD SKILLS ===
    "expertise": {
        "designer": [
            Resource("book", "–î–∏–∑–∞–π–Ω –ø—Ä–∏–≤—ã—á–Ω—ã—Ö –≤–µ—â–µ–π", "–î–æ–Ω–∞–ª—å–¥ –ù–æ—Ä–º–∞–Ω", "", 
                    "–§—É–Ω–¥–∞–º–µ–Ω—Ç UX-–º—ã—à–ª–µ–Ω–∏—è, –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏", "8 —á–∞—Å–æ–≤", "easy", "ru", False, 1),
            Resource("book", "Don't Make Me Think", "Steve Krug", "",
                    "–ü—Ä–∞–∫—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —é–∑–∞–±–∏–ª–∏—Ç–∏", "4 —á–∞—Å–∞", "easy", "en", False, 1),
            Resource("course", "Google UX Design Professional Certificate", "https://coursera.org/google-ux",
                    "–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –æ—Ç Google, –æ—Ç –æ—Å–Ω–æ–≤ –¥–æ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ", "6 –º–µ—Å—è—Ü–µ–≤", "medium", "en", False, 1),
            Resource("practice", "Daily UI Challenge", "https://dailyui.co",
                    "100 –¥–Ω–µ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ UI-–¥–∏–∑–∞–π–Ω–∞", "30-60 –º–∏–Ω/–¥–µ–Ω—å", "medium", "en", True, 2),
            Resource("community", "–î–∏–∑–∞–π–Ω-–∫–∞–±–∞–∫", "https://t.me/designpub",
                    "–°–æ–æ–±—â–µ—Å—Ç–≤–æ –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤ –¥–ª—è –Ω–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥–∞", "‚Äî", "easy", "ru", True, 3),
        ],
        "product": [
            Resource("book", "Inspired", "Marty Cagan", "",
                    "–ë–∏–±–ª–∏—è –ø—Ä–æ–¥–∞–∫—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ –æ—Ç SVPG", "10 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("book", "–ü—Ä–æ–¥–∞–∫—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç", "–ò–Ω—Ç–µ—Ä–∫–æ–º", "",
                    "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ—Ç Intercom", "6 —á–∞—Å–æ–≤", "medium", "ru", False, 1),
            Resource("course", "Reforge Product Strategy", "https://reforge.com",
                    "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞", "8 –Ω–µ–¥–µ–ª—å", "hard", "en", False, 1),
            Resource("practice", "–†–∞–∑–±–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã—Ö –∫–µ–π—Å–æ–≤", "",
                    "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–ø—É—Å–∫–æ–≤ –∏ —Ä–µ—à–µ–Ω–∏–π", "2-3 —á–∞—Å–∞/–Ω–µ–¥–µ–ª—é", "medium", "ru", True, 2),
            Resource("article", "Lenny's Newsletter", "https://lennysnewsletter.com",
                    "–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –æ—Ç —Ç–æ–ø–æ–≤—ã—Ö PM", "1 —á–∞—Å/–Ω–µ–¥–µ–ª—é", "easy", "en", True, 2),
        ],
    },
    
    "methodology": {
        "designer": [
            Resource("book", "Sprint", "Jake Knapp", "",
                    "–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –¥–∏–∑–∞–π–Ω-—Å–ø—Ä–∏–Ω—Ç–æ–≤ –æ—Ç Google Ventures", "6 —á–∞—Å–æ–≤", "easy", "ru", False, 1),
            Resource("course", "IDEO Design Thinking", "https://ideou.com",
                    "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫—É—Ä—Å Design Thinking –æ—Ç IDEO", "4 –Ω–µ–¥–µ–ª–∏", "medium", "en", False, 1),
            Resource("book", "Lean UX", "Jeff Gothelf", "",
                    "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Lean –≤ –¥–∏–∑–∞–π–Ω–µ", "5 —á–∞—Å–æ–≤", "medium", "en", False, 2),
            Resource("practice", "–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω-—Å–ø—Ä–∏–Ω—Ç–∞", "",
                    "–û—Ä–≥–∞–Ω–∏–∑—É–π 5-–¥–Ω–µ–≤–Ω—ã–π —Å–ø—Ä–∏–Ω—Ç –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞", "1 –Ω–µ–¥–µ–ª—è", "hard", "ru", True, 1),
        ],
        "product": [
            Resource("book", "Lean Analytics", "Alistair Croll", "",
                    "–†–∞–±–æ—Ç–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞–¥–∏—è—Ö –ø—Ä–æ–¥—É–∫—Ç–∞", "8 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("book", "The Mom Test", "Rob Fitzpatrick", "",
                    "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å custdev", "3 —á–∞—Å–∞", "easy", "en", False, 1),
            Resource("course", "Product Analytics Certification", "https://amplitude.com",
                    "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ", "20 —á–∞—Å–æ–≤", "medium", "en", True, 1),
            Resource("practice", "Weekly Metrics Review", "",
                    "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–∞", "1 —á–∞—Å/–Ω–µ–¥–µ–ª—é", "easy", "ru", True, 2),
        ],
    },
    
    "tools_proficiency": {
        "designer": [
            Resource("course", "Figma Advanced Techniques", "https://figma.com/resources",
                    "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ Figma: auto-layout, variants, tokens", "10 —á–∞—Å–æ–≤", "medium", "en", True, 1),
            Resource("practice", "–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã", "",
                    "–ü–æ—Å—Ç—Ä–æ–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—É —Å —Ç–æ–∫–µ–Ω–∞–º–∏", "2-4 –Ω–µ–¥–µ–ª–∏", "hard", "ru", True, 1),
            Resource("tool", "Tokens Studio for Figma", "https://tokens.studio",
                    "–ü–ª–∞–≥–∏–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∏–∑–∞–π–Ω-—Ç–æ–∫–µ–Ω–∞–º–∏", "‚Äî", "medium", "en", True, 2),
            Resource("course", "Framer Advanced", "https://framer.com",
                    "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã –∏ –º–∏–∫—Ä–æ–∞–Ω–∏–º–∞—Ü–∏–∏", "8 —á–∞—Å–æ–≤", "medium", "en", False, 2),
        ],
        "product": [
            Resource("course", "SQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—Ç–æ–≤", "https://stepik.org",
                    "–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏", "20 —á–∞—Å–æ–≤", "medium", "ru", False, 1),
            Resource("tool", "Amplitude / Mixpanel", "",
                    "–û—Å–≤–æ–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏", "10 —á–∞—Å–æ–≤", "medium", "en", True, 1),
            Resource("practice", "A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ", "",
                    "–ó–∞–ø—É—Å—Ç–∏ –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π 3 A/B —Ç–µ—Å—Ç–∞", "4-8 –Ω–µ–¥–µ–ª—å", "medium", "ru", True, 1),
            Resource("course", "Python –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö", "https://practicum.yandex.ru",
                    "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏", "3 –º–µ—Å—è—Ü–∞", "hard", "ru", False, 3),
        ],
    },
    
    # === SOFT SKILLS ===
    "articulation": {
        "all": [
            Resource("book", "–ü–∏—Ä–∞–º–∏–¥–∞ –ú–∏–Ω—Ç–æ", "–ë–∞—Ä–±–∞—Ä–∞ –ú–∏–Ω—Ç–æ", "",
                    "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º—ã—Å–ª–µ–π –∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π", "6 —á–∞—Å–æ–≤", "medium", "ru", False, 1),
            Resource("book", "–ò—Å–∫—É—Å—Å—Ç–≤–æ –æ–±—ä—è—Å–Ω—è—Ç—å", "–õ–∏ –õ–µ–§–µ–≤–µ—Ä", "",
                    "–ö–∞–∫ –¥–æ–Ω–æ—Å–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∏–¥–µ–∏ –ø—Ä–æ—Å—Ç–æ", "4 —á–∞—Å–∞", "easy", "ru", False, 1),
            Resource("practice", "Toastmasters", "https://toastmasters.org",
                    "–ö–ª—É–± –ø—É–±–ª–∏—á–Ω—ã—Ö –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π", "2 —á–∞—Å–∞/–Ω–µ–¥–µ–ª—é", "medium", "en", False, 1),
            Resource("practice", "Elevator Pitch", "",
                    "–û—Ç—Ä–∞–±–æ—Ç–∞–π 30-—Å–µ–∫—É–Ω–¥–Ω—É—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é 10 –∏–¥–µ–π", "2 —á–∞—Å–∞", "easy", "ru", True, 2),
            Resource("practice", "–ó–∞–ø–∏—Å—ã–≤–∞–π —Å–µ–±—è", "",
                    "–ó–∞–ø–∏—Å—ã–≤–∞–π —Å–≤–æ–∏ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π", "30 –º–∏–Ω/–Ω–µ–¥–µ–ª—é", "easy", "ru", True, 2),
        ],
    },
    
    "self_awareness": {
        "all": [
            Resource("book", "Insight", "Tasha Eurich", "",
                    "–ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑–≤–∏—Ç–∏—é —Å–∞–º–æ–æ—Å–æ–∑–Ω–∞–Ω–∏—è", "8 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("book", "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç", "–î—ç–Ω–∏–µ–ª –ì–æ—É–ª–º–∞–Ω", "",
                    "–ö–ª–∞—Å—Å–∏–∫–∞ –ø–æ EQ", "10 —á–∞—Å–æ–≤", "medium", "ru", False, 1),
            Resource("practice", "360¬∞ Review", "",
                    "–ó–∞–ø—Ä–æ—Å–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç 5+ –∫–æ–ª–ª–µ–≥", "—Ä–∞–∑–æ–≤–æ", "medium", "ru", True, 1),
            Resource("practice", "–î–Ω–µ–≤–Ω–∏–∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏", "",
                    "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–π 3 –∏–Ω—Å–∞–π—Ç–∞ –æ —Å–µ–±–µ", "10 –º–∏–Ω/–¥–µ–Ω—å", "easy", "ru", True, 1),
            Resource("practice", "–†–∞–±–æ—Ç–∞ —Å –∫–æ—É—á–µ–º/–º–µ–Ω—Ç–æ—Ä–æ–º", "",
                    "–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –¥–ª—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏", "1-2 —á–∞—Å–∞/–º–µ—Å—è—Ü", "medium", "ru", False, 2),
        ],
    },
    
    "conflict_handling": {
        "all": [
            Resource("book", "Crucial Conversations", "Patterson et al.", "",
                    "–¢–µ—Ö–Ω–∏–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤", "6 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("book", "–ù–µ–Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ", "–ú–∞—Ä—à–∞–ª–ª –†–æ–∑–µ–Ω–±–µ—Ä–≥", "",
                    "NVC ‚Äî –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥", "6 —á–∞—Å–æ–≤", "medium", "ru", False, 1),
            Resource("book", "Getting to Yes", "Fisher & Ury", "",
                    "–ü—Ä–∏–Ω—Ü–∏–ø—ã –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ –∏–∑ –ì–∞—Ä–≤–∞—Ä–¥–∞", "5 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("practice", "–†–æ–ª–µ–≤—ã–µ –∏–≥—Ä—ã", "",
                    "–û—Ç—Ä–∞–±–æ—Ç–∞–π —Å–ª–æ–∂–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã —Å –∫–æ–ª–ª–µ–≥–æ–π", "1 —á–∞—Å/–Ω–µ–¥–µ–ª—é", "medium", "ru", True, 2),
            Resource("practice", "–ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤", "",
                    "–†–∞–∑–±–∏—Ä–∞–π –ø—Ä–æ—à–ª—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã: —á—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, —á—Ç–æ –Ω–µ—Ç", "—Ä–∞–∑–æ–≤–æ", "easy", "ru", True, 2),
        ],
    },
    
    # === THINKING ===
    "depth": {
        "all": [
            Resource("book", "Thinking, Fast and Slow", "Daniel Kahneman", "",
                    "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π", "15 —á–∞—Å–æ–≤", "hard", "en", False, 1),
            Resource("book", "–ò—Å–∫—É—Å—Å—Ç–≤–æ –¥—É–º–∞—Ç—å", "–†–æ–ª—å—Ñ –î–æ–±–µ–ª–ª–∏", "",
                    "52 –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å", "4 —á–∞—Å–∞", "easy", "ru", False, 2),
            Resource("practice", "5 Whys", "",
                    "–ü—Ä–∏–º–µ–Ω—è–π —Ç–µ—Ö–Ω–∏–∫—É '5 –ø–æ—á–µ–º—É' –∫ –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º–µ", "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "easy", "ru", True, 1),
            Resource("practice", "Root Cause Analysis", "",
                    "Fishbone –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º", "–ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏", "medium", "ru", True, 1),
            Resource("practice", "First Principles Thinking", "",
                    "–†–∞–∑–±–∏—Ä–∞–π –ø—Ä–æ–±–ª–µ–º—ã –¥–æ –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "hard", "ru", True, 2),
        ],
    },
    
    "structure": {
        "all": [
            Resource("book", "The Pyramid Principle", "Barbara Minto", "",
                    "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º—ã—à–ª–µ–Ω–∏—è –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏", "6 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("practice", "MECE Framework", "",
                    "–î–µ–∫–æ–º–ø–æ–∑–∏—Ä—É–π –∫–∞–∂–¥—É—é –∑–∞–¥–∞—á—É –ø–æ MECE", "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "medium", "ru", True, 1),
            Resource("practice", "Issue Trees", "",
                    "–°—Ç—Ä–æ–π –¥–µ—Ä–µ–≤—å—è –ø—Ä–æ–±–ª–µ–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "medium", "ru", True, 1),
            Resource("tool", "Notion / Obsidian", "",
                    "–°–∏—Å—Ç–µ–º—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞–Ω–∏–π", "‚Äî", "easy", "ru", True, 2),
            Resource("course", "McKinsey Problem Solving", "https://coursera.org",
                    "–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –æ—Ç McKinsey", "20 —á–∞—Å–æ–≤", "hard", "en", False, 2),
        ],
    },
    
    "systems_thinking": {
        "all": [
            Resource("book", "Thinking in Systems", "Donella Meadows", "",
                    "–û—Å–Ω–æ–≤—ã —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è", "8 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("book", "–ò—Å–∫—É—Å—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è", "–û'–ö–æ–Ω–Ω–æ—Ä", "",
                    "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ", "6 —á–∞—Å–æ–≤", "medium", "ru", False, 1),
            Resource("practice", "Systems Mapping", "",
                    "–†–∏—Å—É–π —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ä—Ç—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "medium", "ru", True, 1),
            Resource("practice", "Causal Loop Diagrams", "",
                    "–°—Ç—Ä–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π", "–ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏", "hard", "ru", True, 2),
            Resource("practice", "Second-Order Thinking", "",
                    "–°–ø—Ä–∞—à–∏–≤–∞–π '–ê —á—Ç–æ –ø–æ—Ç–æ–º?' –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è", "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "medium", "ru", True, 1),
        ],
    },
    
    "creativity": {
        "all": [
            Resource("book", "Lateral Thinking", "Edward de Bono", "",
                    "–¢–µ—Ö–Ω–∏–∫–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è", "6 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("book", "–ö—Ä–∞–¥–∏ –∫–∞–∫ —Ö—É–¥–æ–∂–Ω–∏–∫", "–û—Å—Ç–∏–Ω –ö–ª–µ–æ–Ω", "",
                    "–ö–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ–∏", "2 —á–∞—Å–∞", "easy", "ru", False, 2),
            Resource("practice", "Crazy 8s", "",
                    "8 –∏–¥–µ–π –∑–∞ 8 –º–∏–Ω—É—Ç ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞", "10 –º–∏–Ω/–¥–µ–Ω—å", "easy", "ru", True, 1),
            Resource("practice", "Random Input", "",
                    "–ò—Å–ø–æ–ª—å–∑—É–π —Å–ª—É—á–∞–π–Ω—ã–µ —Å—Ç–∏–º—É–ª—ã –¥–ª—è –∏–¥–µ–π", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "easy", "ru", True, 2),
            Resource("practice", "Constraint-based Design", "",
                    "–†–µ—à–∞–π –∑–∞–¥–∞—á–∏ —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "medium", "ru", True, 2),
            Resource("practice", "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –∂—É—Ä–Ω–∞–ª", "",
                    "–ó–∞–ø–∏—Å—ã–≤–∞–π –º–∏–Ω–∏–º—É–º 3 –∏–¥–µ–∏ –≤ –¥–µ–Ω—å", "15 –º–∏–Ω/–¥–µ–Ω—å", "easy", "ru", True, 1),
        ],
    },
    
    # === MINDSET ===
    "honesty": {
        "all": [
            Resource("book", "Radical Candor", "Kim Scott", "",
                    "–ö—É–ª—å—Ç—É—Ä–∞ —á–µ—Å—Ç–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏", "6 —á–∞—Å–æ–≤", "medium", "en", False, 1),
            Resource("book", "–ü—Ä–∏–Ω—Ü–∏–ø—ã", "–†—ç–π –î–∞–ª–∏–æ", "",
                    "–†–∞–¥–∏–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –≤ —Ä–∞–±–æ—Ç–µ", "15 —á–∞—Å–æ–≤", "hard", "ru", False, 2),
            Resource("practice", "Fail Fridays", "",
                    "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –¥–µ–ª–∏—Å—å —Å–≤–æ–µ–π –æ—à–∏–±–∫–æ–π —Å –∫–æ–º–∞–Ω–¥–æ–π", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "medium", "ru", True, 1),
            Resource("practice", "Pre-mortem", "",
                    "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–ª—ã –¥–æ –∑–∞–ø—É—Å–∫–∞", "–ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏", "medium", "ru", True, 1),
            Resource("practice", "Blameless Postmortems", "",
                    "–ü—Ä–æ–≤–æ–¥–∏ —Ä–µ—Ç—Ä–æ –±–µ–∑ –æ–±–≤–∏–Ω–µ–Ω–∏–π", "–ø–æ—Å–ª–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤", "medium", "ru", True, 2),
        ],
    },
    
    "growth_orientation": {
        "all": [
            Resource("book", "Mindset", "Carol Dweck", "",
                    "Growth vs Fixed mindset", "6 —á–∞—Å–æ–≤", "easy", "en", False, 1),
            Resource("book", "Atomic Habits", "James Clear", "",
                    "–ö–∞–∫ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤—ã—á–∫–∏", "5 —á–∞—Å–æ–≤", "easy", "en", False, 1),
            Resource("practice", "Learning Journal", "",
                    "–ó–∞–ø–∏—Å—ã–≤–∞–π 3 –Ω–æ–≤—ã—Ö –≤–µ—â–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å", "10 –º–∏–Ω/–¥–µ–Ω—å", "easy", "ru", True, 1),
            Resource("practice", "Weekly Learning Goal", "",
                    "–°—Ç–∞–≤—å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—É—é —Ü–µ–ª—å –æ–±—É—á–µ–Ω–∏—è", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "easy", "ru", True, 1),
            Resource("practice", "Teach to Learn", "",
                    "–û–±—ä—è—Å–Ω—è–π –∏–∑—É—á–µ–Ω–Ω–æ–µ –¥—Ä—É–≥–∏–º", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "medium", "ru", True, 2),
            Resource("practice", "Stretch Assignments", "",
                    "–ë–µ—Ä–∏ –∑–∞–¥–∞—á–∏ –≤—ã—à–µ —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è", "–µ–∂–µ–º–µ—Å—è—á–Ω–æ", "hard", "ru", True, 1),
        ],
    },
}


# ========================================
# –î–ï–ô–°–¢–í–ò–Ø –ü–û –†–ê–ó–í–ò–¢–ò–Æ
# ========================================

ACTIONS_DB = {
    "expertise": {
        "junior": [
            DevelopmentAction(
                "–ò–∑—É—á–∏ 3 –∫–µ–π—Å–∞ –ª–∏–¥–µ—Ä–æ–≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏",
                "–ü–æ–Ω–∏–º–∞–Ω–∏–µ best practices —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –Ω–∞—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ—Å—Ç—å",
                "–í—ã–±–µ—Ä–∏ 3 –ø—Ä–æ–¥—É–∫—Ç–∞/–ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ä–∞–∑–±–µ—Ä–∏ –∏—Ö –¥–µ—Ç–∞–ª—å–Ω–æ: —á—Ç–æ, –ø–æ—á–µ–º—É, –∫–∞–∫",
                "4-6 —á–∞—Å–æ–≤",
                "—Ä–∞–∑–æ–≤–æ",
                "–ù–∞–ø–∏—Å–∞–Ω–Ω—ã–π —Ä–∞–∑–±–æ—Ä 3 –∫–µ–π—Å–æ–≤",
                1
            ),
            DevelopmentAction(
                "–ù–∞–π–¥–∏ –º–µ–Ω—Ç–æ—Ä–∞ –≤ —Å–≤–æ–µ–π –æ–±–ª–∞—Å—Ç–∏",
                "–ú–µ–Ω—Ç–æ—Ä —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏–µ –≤ 2-3 —Ä–∞–∑–∞",
                "–°–≤—è–∂–∏—Å—å —Å 3-5 –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –º–µ–Ω—Ç–æ—Ä–∞–º–∏, –¥–æ–≥–æ–≤–æ—Ä–∏—Å—å –æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á–∞—Ö",
                "2-4 –Ω–µ–¥–µ–ª–∏ –Ω–∞ –ø–æ–∏—Å–∫",
                "–µ–∂–µ–º–µ—Å—è—á–Ω–æ –≤—Å—Ç—Ä–µ—á–∏",
                "–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –º–µ–Ω—Ç–æ—Ä—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏",
                1
            ),
        ],
        "middle": [
            DevelopmentAction(
                "–£–≥–ª—É–±–∏—Å—å –≤ —Å–≤–æ—é –Ω–∏—à—É",
                "T-shaped —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Ü–µ–Ω–Ω–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∞",
                "–í—ã–±–µ—Ä–∏ 1-2 —Ç–µ–º—ã –∏ —Å—Ç–∞–Ω—å –≤ –Ω–∏—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–º (—Å—Ç–∞—Ç—å–∏, –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è)",
                "3-6 –º–µ—Å—è—Ü–µ–≤",
                "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ",
                "–°—Ç–∞—Ç—å—è –∏–ª–∏ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–æ —Ç–µ–º–µ",
                1
            ),
        ],
        "senior": [
            DevelopmentAction(
                "–ù–∞—á–Ω–∏ –¥–µ–ª–∏—Ç—å—Å—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–æ–π",
                "–û–±—É—á–∞—è –¥—Ä—É–≥–∏—Ö, —É–≥–ª—É–±–ª—è–µ—à—å —Å–≤–æ—ë –ø–æ–Ω–∏–º–∞–Ω–∏–µ",
                "–í–µ–¥–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–∏—Ç–∞–ø—ã, –ø–∏—à–∏ —Å—Ç–∞—Ç—å–∏, –º–µ–Ω—Ç–æ—Ä—å junior",
                "2-4 —á–∞—Å–∞/–Ω–µ–¥–µ–ª—é",
                "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ",
                "2+ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è –∏–ª–∏ —Å—Ç–∞—Ç—å–∏ –≤ –º–µ—Å—è—Ü",
                1
            ),
        ],
        "lead": [
            DevelopmentAction(
                "–í—ã—Å—Ç—Ä–æ–π —Å–∏—Å—Ç–µ–º—É –ø–µ—Ä–µ–¥–∞—á–∏ –∑–Ω–∞–Ω–∏–π",
                "–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –Ω–∞ –∫–æ–º–∞–Ω–¥—É",
                "–°–æ–∑–¥–∞–π –ø—Ä–æ–≥—Ä–∞–º–º—É –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –∏ development plan –¥–ª—è –∫–æ–º–∞–Ω–¥—ã",
                "2-4 –Ω–µ–¥–µ–ª–∏",
                "—Ä–∞–∑–æ–≤–æ + –ø–æ–¥–¥–µ—Ä–∂–∫–∞",
                "–†–∞–±–æ—Ç–∞—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–∏—Ç–∏—è –≤ –∫–æ–º–∞–Ω–¥–µ",
                1
            ),
        ],
    },
    
    "depth": {
        "all": [
            DevelopmentAction(
                "–ü—Ä–∞–∫—Ç–∏–∫—É–π —Ç–µ—Ö–Ω–∏–∫—É '5 –ø–æ—á–µ–º—É'",
                "–î–æ–±–∏—Ä–∞–µ—à—å—Å—è –¥–æ –∫–æ—Ä–Ω–µ–≤—ã—Ö –ø—Ä–∏—á–∏–Ω, –∞ –Ω–µ —Å–∏–º–ø—Ç–æ–º–æ–≤",
                "–ö –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º–µ –∑–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å '–ü–æ—á–µ–º—É?' –º–∏–Ω–∏–º—É–º 5 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥",
                "5 –º–∏–Ω—É—Ç –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É",
                "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ",
                "–ù–∞–π–¥–µ–Ω–æ 3+ –∫–æ—Ä–Ω–µ–≤—ã—Ö –ø—Ä–∏—á–∏–Ω—ã –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ",
                1
            ),
            DevelopmentAction(
                "–í–µ–¥–∏ –∂—É—Ä–Ω–∞–ª —Ä–µ—à–µ–Ω–∏–π",
                "–†–µ—Ñ–ª–µ–∫—Å–∏—è —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –º—ã—à–ª–µ–Ω–∏—è",
                "–ó–∞–ø–∏—Å—ã–≤–∞–π –≤–∞–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è: –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –≤—ã–±–æ—Ä, —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
                "15 –º–∏–Ω—É—Ç",
                "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ",
                "10+ –∑–∞–ø–∏—Å–µ–π –≤ –∂—É—Ä–Ω–∞–ª–µ –∑–∞ –º–µ—Å—è—Ü",
                2
            ),
        ],
    },
    
    "creativity": {
        "all": [
            DevelopmentAction(
                "–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –∏–¥–µ–π",
                "–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –º—ã—à—Ü–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –∫–∞—á–∞—Ç—å",
                "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≥–µ–Ω–µ—Ä–∏—Ä—É–π 10 –∏–¥–µ–π –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Ç–µ–º—É (–º–µ—Ç–æ–¥ –î–∂–µ–π–º—Å–∞ –ê–ª—å—Ç—É—á–µ—Ä–∞)",
                "15 –º–∏–Ω—É—Ç",
                "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ",
                "70+ –∏–¥–µ–π –∑–∞ –Ω–µ–¥–µ–ª—é",
                1
            ),
            DevelopmentAction(
                "Crazy 8s –¥–ª—è —Ä–∞–±–æ—á–∏—Ö –∑–∞–¥–∞—á",
                "–ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤",
                "–î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –Ω–∞—Ä–∏—Å—É–π 8 —Ä–∞–∑–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –∑–∞ 8 –º–∏–Ω—É—Ç",
                "8 –º–∏–Ω—É—Ç",
                "–ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏",
                "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª Crazy 8s –¥–ª—è 5 –∑–∞–¥–∞—á",
                1
            ),
        ],
    },
    
    "self_awareness": {
        "all": [
            DevelopmentAction(
                "–ó–∞–ø—Ä–æ—Å–∏ 360¬∞ feedback",
                "–í–∏–¥–∏—à—å —Å–ª–µ–ø—ã–µ –∑–æ–Ω—ã —á–µ—Ä–µ–∑ –≥–ª–∞–∑–∞ –¥—Ä—É–≥–∏—Ö",
                "–ü–æ–ø—Ä–æ—Å–∏ 5-7 –∫–æ–ª–ª–µ–≥ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 3 –≤–æ–ø—Ä–æ—Å–∞: —á—Ç–æ –¥–µ–ª–∞—é —Ö–æ—Ä–æ—à–æ, —á—Ç–æ —É–ª—É—á—à–∏—Ç—å, —á—Ç–æ —É–¥–∏–≤–ª—è–µ—Ç",
                "2-3 –¥–Ω—è",
                "–µ–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ",
                "–ü–æ–ª—É—á–µ–Ω feedback –æ—Ç 5+ —á–µ–ª–æ–≤–µ–∫",
                1
            ),
            DevelopmentAction(
                "–í–µ–¥–∏ –¥–Ω–µ–≤–Ω–∏–∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏",
                "–†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è —Ä–∞–∑–≤–∏–≤–∞–µ—Ç —Å–∞–º–æ–æ—Å–æ–∑–Ω–∞–Ω–∏–µ",
                "–ö–∞–∂–¥—ã–π –≤–µ—á–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–π: —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å, —á—Ç–æ –Ω–µ—Ç, —á—Ç–æ —É–∑–Ω–∞–ª –æ —Å–µ–±–µ",
                "10 –º–∏–Ω—É—Ç",
                "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ",
                "30+ –∑–∞–ø–∏—Å–µ–π –∑–∞ –º–µ—Å—è—Ü",
                1
            ),
        ],
    },
    
    "articulation": {
        "all": [
            DevelopmentAction(
                "–ó–∞–ø–∏—Å—ã–≤–∞–π —Å–≤–æ–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è",
                "–í–∏–¥–∏—à—å —Å–µ–±—è —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã",
                "–û–±—ä—è—Å–Ω–∏ —Å–ª–æ–∂–Ω—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –Ω–∞ –∫–∞–º–µ—Ä—É, –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∏, —É–ª—É—á—à–∏",
                "30 –º–∏–Ω—É—Ç",
                "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ",
                "4 –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∑–∞ –º–µ—Å—è—Ü",
                1
            ),
            DevelopmentAction(
                "–ü—Ä–∞–∫—Ç–∏–∫–∞ Elevator Pitch",
                "–£–º–µ–Ω–∏–µ –±—ã—Å—Ç—Ä–æ –¥–æ–Ω–æ—Å–∏—Ç—å —Å—É—Ç—å",
                "–ü–æ–¥–≥–æ—Ç–æ–≤—å 30-—Å–µ–∫—É–Ω–¥–Ω—É—é –≤–µ—Ä—Å–∏—é –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞/–∏–¥–µ–∏",
                "15 –º–∏–Ω—É—Ç",
                "–ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏",
                "5+ –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø–∏—Ç—á–µ–π",
                2
            ),
        ],
    },
    
    "growth_orientation": {
        "all": [
            DevelopmentAction(
                "–°–æ–∑–¥–∞–π Personal Learning Plan",
                "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ —Ö–∞–æ—Ç–∏—á–Ω–æ–≥–æ",
                "–û–ø—Ä–µ–¥–µ–ª–∏ 3 –Ω–∞–≤—ã–∫–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è, –Ω–∞–π–¥–∏ —Ä–µ—Å—É—Ä—Å—ã, –ø–æ—Å—Ç–∞–≤—å —Å—Ä–æ–∫–∏",
                "2-3 —á–∞—Å–∞",
                "–µ–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ",
                "–î–æ–∫—É–º–µ–Ω—Ç —Å –ø–ª–∞–Ω–æ–º –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º",
                1
            ),
            DevelopmentAction(
                "–ë–µ—Ä–∏ stretch-–∑–∞–¥–∞—á–∏",
                "–†–æ—Å—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∑–æ–Ω—ã –∫–æ–º—Ñ–æ—Ä—Ç–∞",
                "–í–æ–∑—å–º–∏ –∑–∞–¥–∞—á—É –Ω–∞ 20-30% —Å–ª–æ–∂–Ω–µ–µ —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è",
                "–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á–∏",
                "–µ–∂–µ–º–µ—Å—è—á–Ω–æ",
                "1 stretch-–∑–∞–¥–∞—á–∞ –≤ –º–µ—Å—è—Ü",
                1
            ),
        ],
    },
    
    "honesty": {
        "all": [
            DevelopmentAction(
                "–ü—Ä–∞–∫—Ç–∏–∫—É–π 'Fail Fridays'",
                "–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫ —Å–æ–∑–¥–∞—ë—Ç –∫—É–ª—å—Ç—É—Ä—É –æ–±—É—á–µ–Ω–∏—è",
                "–ö–∞–∂–¥—É—é –ø—è—Ç–Ω–∏—Ü—É –¥–µ–ª–∏—Å—å —Å –∫–æ–º–∞–Ω–¥–æ–π –æ–¥–Ω–æ–π —Å–≤–æ–µ–π –æ—à–∏–±–∫–æ–π –∏ –≤—ã–≤–æ–¥–æ–º",
                "10 –º–∏–Ω—É—Ç",
                "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ",
                "4+ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–∞–∑–±–æ—Ä–∞ –æ—à–∏–±–æ–∫ –∑–∞ –º–µ—Å—è—Ü",
                1
            ),
        ],
    },
}


def _get_resources_for_metric(metric: str, role: str) -> list[Resource]:
    """–ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ä–æ–ª–∏."""
    metric_resources = RESOURCES_DB.get(metric, {})
    
    # –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–æ–ª–∏
    if role in metric_resources:
        return metric_resources[role]
    
    # –ü–æ—Ç–æ–º –æ–±—â–∏–µ
    if "all" in metric_resources:
        return metric_resources["all"]
    
    # –ï—Å–ª–∏ –¥–ª—è —Ä–æ–ª–∏ designer –Ω–µ—Ç, –ø—Ä–æ–±—É–µ–º product –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç
    for r in ["designer", "product"]:
        if r in metric_resources:
            return metric_resources[r]
    
    return []


def _get_actions_for_metric(metric: str, experience: str) -> list[DevelopmentAction]:
    """–ü–æ–ª—É—á–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –º–µ—Ç—Ä–∏–∫–∏ –∏ —É—Ä–æ–≤–Ω—è."""
    metric_actions = ACTIONS_DB.get(metric, {})
    
    # –°–Ω–∞—á–∞–ª–∞ –¥–ª—è —É—Ä–æ–≤–Ω—è
    actions = metric_actions.get(experience, [])
    
    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—â–∏–µ
    actions.extend(metric_actions.get("all", []))
    
    return actions


def _prioritize_gaps(
    raw_averages: dict[str, float],
    experience: str,
) -> list[tuple[str, float, str]]:
    """
    –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–æ–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è.
    
    Returns:
        –°–ø–∏—Å–æ–∫ (metric, gap, priority) –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
    """
    # –í–µ—Å–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
    category_weights = {
        "junior": {
            "expertise": 1.5, "methodology": 1.3, "tools_proficiency": 1.2,
            "articulation": 1.0, "self_awareness": 1.0, "conflict_handling": 0.8,
            "depth": 1.2, "structure": 1.3, "systems_thinking": 0.9, "creativity": 0.8,
            "honesty": 1.0, "growth_orientation": 1.4,
        },
        "middle": {
            "expertise": 1.3, "methodology": 1.2, "tools_proficiency": 1.0,
            "articulation": 1.2, "self_awareness": 1.3, "conflict_handling": 1.2,
            "depth": 1.4, "structure": 1.2, "systems_thinking": 1.3, "creativity": 1.1,
            "honesty": 1.1, "growth_orientation": 1.2,
        },
        "senior": {
            "expertise": 1.1, "methodology": 1.0, "tools_proficiency": 0.8,
            "articulation": 1.3, "self_awareness": 1.4, "conflict_handling": 1.3,
            "depth": 1.3, "structure": 1.1, "systems_thinking": 1.5, "creativity": 1.2,
            "honesty": 1.2, "growth_orientation": 1.1,
        },
        "lead": {
            "expertise": 1.0, "methodology": 0.9, "tools_proficiency": 0.7,
            "articulation": 1.4, "self_awareness": 1.5, "conflict_handling": 1.4,
            "depth": 1.2, "structure": 1.0, "systems_thinking": 1.5, "creativity": 1.1,
            "honesty": 1.3, "growth_orientation": 1.0,
        },
    }
    
    weights = category_weights.get(experience, category_weights["middle"])
    
    # –°—á–∏—Ç–∞–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π gap = (10 - score) * weight
    gaps = []
    for metric, score in raw_averages.items():
        if metric not in ALL_METRICS:
            continue
        gap = (10 - score) * weights.get(metric, 1.0)
        
        if gap > 4:
            priority = "high"
        elif gap > 2:
            priority = "medium"
        else:
            priority = "low"
        
        gaps.append((metric, 10 - score, priority, gap))
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ weighted gap
    gaps.sort(key=lambda x: x[3], reverse=True)
    
    return [(m, g, p) for m, g, p, _ in gaps]


def _generate_timeline_plan(goals: list[DevelopmentGoal], experience: str) -> tuple[list[str], list[str], list[str]]:
    """–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω –Ω–∞ 30/60/90 –¥–Ω–µ–π."""
    plan_30 = []
    plan_60 = []
    plan_90 = []
    
    # 30 –¥–Ω–µ–π ‚Äî quick wins –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫
    plan_30.append("üìö –ü—Ä–æ—á–∏—Ç–∞—Ç—å 1 –∫–Ω–∏–≥—É –∏–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π")
    plan_30.append("‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å 2 –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏")
    
    if goals:
        top_goal = goals[0]
        plan_30.append(f"üéØ –§–æ–∫—É—Å –Ω–∞ {top_goal.metric_name}: –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ")
        
        if top_goal.actions:
            for action in top_goal.actions[:2]:
                if "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ" in action.frequency or "—Ä–∞–∑–æ–≤–æ" in action.frequency:
                    plan_30.append(f"‚ñ∏ {action.action}")
    
    # 60 –¥–Ω–µ–π ‚Äî deeper work
    plan_60.append("üìñ –ò–∑—É—á–∏—Ç—å 2 –∫–Ω–∏–≥–∏/–∫—É—Ä—Å–∞ –∏–∑ —Å–ø–∏—Å–∫–∞")
    plan_60.append("üîÑ –ó–∞–∫—Ä–µ–ø–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ –ø—Ä–∏–≤—ã—á–∫–∏")
    
    if len(goals) > 1:
        plan_60.append(f"üéØ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–∫—É—Å –Ω–∞ {goals[1].metric_name}")
    
    plan_60.append("üìä –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É")
    
    # 90 –¥–Ω–µ–π ‚Äî mastery
    plan_90.append("üèÜ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—å –∏–∑–º–µ—Ä–∏–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ –≥–ª–∞–≤–Ω–æ–π —Ü–µ–ª–∏")
    plan_90.append("üìù –ù–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç—å—é –∏–ª–∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –º–∏—Ç–∞–ø –ø–æ –∏–∑—É—á–µ–Ω–Ω–æ–º—É")
    plan_90.append("üîÑ –ü—Ä–æ–π—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞")
    
    if experience in ["senior", "lead"]:
        plan_90.append("üë• –ù–∞—á–∞—Ç—å –º–µ–Ω—Ç–æ—Ä–∏—Ç—å –∫–æ–≥–æ-—Ç–æ –≤ —Å–≤–æ–∏—Ö —Å–∏–ª—å–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö")
    
    return plan_30, plan_60, plan_90


def build_pdp(
    role: str,
    role_name: str,
    experience: str,
    experience_name: str,
    total_score: int,
    raw_averages: dict[str, float],
    strengths: list[str],
) -> PersonalDevelopmentPlan:
    """
    –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è.
    
    Args:
        role: designer / product
        role_name: –î–∏–∑–∞–π–Ω–µ—Ä / –ü—Ä–æ–¥–∞–∫—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä
        experience: junior / middle / senior / lead
        experience_name: –¥–æ 1 –≥–æ–¥–∞ / 1-3 –≥–æ–¥–∞ / ...
        total_score: –û–±—â–∏–π –±–∞–ª–ª 0-100
        raw_averages: –°—Ä–µ–¥–Ω–∏–µ –ø–æ 12 –º–µ—Ç—Ä–∏–∫–∞–º
        strengths: –¢–æ–ø —Å–∏–ª—å–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω
    
    Returns:
        PersonalDevelopmentPlan
    """
    pdp = PersonalDevelopmentPlan(
        role=role,
        role_name=role_name,
        experience=experience,
        experience_name=experience_name,
        total_score=total_score,
    )
    
    # –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
    if total_score >= 80:
        pdp.overall_assessment = "–û—Ç–ª–∏—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å! –§–æ–∫—É—Å –Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–ª–∏—è–Ω–∏—è."
        pdp.main_focus = "–†–∞–∑–≤–∏—Ç–∏–µ –ª–∏–¥–µ—Ä—Å–∫–∏—Ö –∫–∞—á–µ—Å—Ç–≤ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã"
    elif total_score >= 60:
        pdp.overall_assessment = "–•–æ—Ä–æ—à–∏–π —É—Ä–æ–≤–µ–Ω—å —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º —Ä–æ—Å—Ç–∞."
        pdp.main_focus = "–£–≥–ª—É–±–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ soft skills"
    elif total_score >= 40:
        pdp.overall_assessment = "–ï—Å—Ç—å –±–∞–∑–∞, –Ω—É–∂–Ω–∞ —Ñ–æ–∫—É—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ –∫–ª—é—á–µ–≤—ã–º–∏ –Ω–∞–≤—ã–∫–∞–º–∏."
        pdp.main_focus = "–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞"
    else:
        pdp.overall_assessment = "–ù–∞—á–∞–ª–æ –ø—É—Ç–∏ ‚Äî –≤–∞–∂–Ω–æ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–∞—Ö."
        pdp.main_focus = "–ò–∑—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤ –∏ –Ω–∞—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏"
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–µ–º gaps
    prioritized = _prioritize_gaps(raw_averages, experience)
    
    # –°—Ç—Ä–æ–∏–º —Ü–µ–ª–∏
    for metric, gap, priority in prioritized[:3]:
        goal = DevelopmentGoal(
            metric=metric,
            metric_name=METRIC_NAMES_RU.get(metric, metric),
            current_score=raw_averages.get(metric, 5),
            target_score=min(10, raw_averages.get(metric, 5) + 2),
            gap=gap,
            priority=priority,
            priority_reason=f"–í–∞–∂–Ω–æ –¥–ª—è {experience_name}" if priority == "high" else "–ó–æ–Ω–∞ —Ä–æ—Å—Ç–∞",
            actions=_get_actions_for_metric(metric, experience),
            resources=_get_resources_for_metric(metric, role)[:3],
            timeline="30 –¥–Ω–µ–π" if priority == "high" else "60 –¥–Ω–µ–π",
        )
        pdp.primary_goals.append(goal)
    
    # Secondary goals
    for metric, gap, priority in prioritized[3:6]:
        goal = DevelopmentGoal(
            metric=metric,
            metric_name=METRIC_NAMES_RU.get(metric, metric),
            current_score=raw_averages.get(metric, 5),
            target_score=min(10, raw_averages.get(metric, 5) + 1.5),
            gap=gap,
            priority=priority,
            priority_reason="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–æ–Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏—è",
            resources=_get_resources_for_metric(metric, role)[:2],
            timeline="90 –¥–Ω–µ–π",
        )
        pdp.secondary_goals.append(goal)
    
    # Timeline –ø–ª–∞–Ω
    pdp.plan_30_days, pdp.plan_60_days, pdp.plan_90_days = _generate_timeline_plan(
        pdp.primary_goals, experience
    )
    
    # –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
    pdp.success_metrics = [
        f"üìà –ü–æ–≤—ã—Å–∏—Ç—å {pdp.primary_goals[0].metric_name} —Å {pdp.primary_goals[0].current_score:.1f} –¥–æ {pdp.primary_goals[0].target_score:.1f}" if pdp.primary_goals else "",
        "üìö –ò–∑—É—á–∏—Ç—å 3 –∫–Ω–∏–≥–∏/–∫—É—Ä—Å–∞ –∏–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π",
        "‚úÖ –í—ã–ø–æ–ª–Ω—è—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ 80% –¥–Ω–µ–π",
        "üîÑ –ü—Ä–æ–π—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π",
    ]
    pdp.success_metrics = [m for m in pdp.success_metrics if m]
    
    # Learning style tips
    pdp.learning_style_tips = [
        "üìñ –ß–µ—Ä–µ–¥—É–π —Ç–µ–æ—Ä–∏—é –∏ –ø—Ä–∞–∫—Ç–∏–∫—É (30% —Ç–µ–æ—Ä–∏–∏, 70% –ø—Ä–∞–∫—Ç–∏–∫–∏)",
        "üìù –í–µ–¥–∏ –∑–∞–º–µ—Ç–∫–∏ –∏ –¥–µ–ª–∞–π –≤—ã–∂–∏–º–∫–∏ –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",
        "üë• –û–±—Å—É–∂–¥–∞–π –∏–∑—É—á–µ–Ω–Ω–æ–µ —Å –∫–æ–ª–ª–µ–≥–∞–º–∏",
        "üîÑ –ü—Ä–∏–º–µ–Ω—è–π –Ω–æ–≤–æ–µ –≤ —Ä–∞–±–æ—á–∏—Ö –∑–∞–¥–∞—á–∞—Ö –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å",
    ]
    
    # –ú–æ—Ç–∏–≤–∞—Ü–∏—è
    motivation_messages = {
        "junior": "üöÄ –¢—ã –≤ –Ω–∞—á–∞–ª–µ –æ—Ç–ª–∏—á–Ω–æ–≥–æ –ø—É—Ç–∏! –ö–∞–∂–¥—ã–π —ç–∫—Å–ø–µ—Ä—Ç –∫–æ–≥–¥–∞-—Ç–æ –Ω–∞—á–∏–Ω–∞–ª —Å –Ω—É–ª—è.",
        "middle": "üí™ –£ —Ç–µ–±—è —Ö–æ—Ä–æ—à–∞—è –±–∞–∑–∞ ‚Äî –ø–æ—Ä–∞ –≤—ã—Ö–æ–¥–∏—Ç—å –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!",
        "senior": "üéØ –¢—ã —É–∂–µ –º–Ω–æ–≥–æ–≥–æ –¥–æ—Å—Ç–∏–≥ ‚Äî –≤—Ä–µ–º—è –≤–ª–∏—è—Ç—å –Ω–∞ –∏–Ω–¥—É—Å—Ç—Ä–∏—é!",
        "lead": "üëë –¢–≤–æ—è –º–∏—Å—Å–∏—è ‚Äî –≤—ã—Ä–∞—Å—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤!",
    }
    pdp.motivation_message = motivation_messages.get(experience, motivation_messages["middle"])
    
    return pdp


def format_pdp_text(pdp: PersonalDevelopmentPlan) -> str:
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å PDP –¥–ª—è Telegram.
    –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –±–µ–∑ –ª–∏—à–Ω–∏—Ö —ç–º–æ–¥–∑–∏, —Ç–æ–ª—å–∫–æ 30 –¥–Ω–µ–π.
    """
    
    # Header ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π
    header = f"""<b>–ü–õ–ê–ù –†–ê–ó–í–ò–¢–ò–Ø –ù–ê 30 –î–ù–ï–ô</b>

–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: <b>{pdp.total_score}/100</b>
–ì–ª–∞–≤–Ω—ã–π —Ñ–æ–∫—É—Å: <b>{pdp.main_focus}</b>

"""
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–æ–Ω—ã (–±–µ–∑ —ç–º–æ–¥–∑–∏, —Å –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–æ–π)
    goals_text = "<b>–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ó–û–ù–´</b>\n\n"
    
    for i, goal in enumerate(pdp.primary_goals[:3], 1):
        # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–µ–∫—Å—Ç–æ–º
        priority_text = "–≤—ã—Å–æ–∫–∏–π" if goal.priority == "high" else "—Å—Ä–µ–¥–Ω–∏–π" if goal.priority == "medium" else "–Ω–∏–∑–∫–∏–π"
        
        goals_text += f"<b>{i}. {goal.metric_name}</b>\n"
        goals_text += f"   –£—Ä–æ–≤–µ–Ω—å: {goal.current_score:.1f}/10 ‚Üí —Ü–µ–ª—å {goal.target_score:.1f}/10\n"
        goals_text += f"   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: {priority_text}\n"
        
        if goal.priority_reason:
            goals_text += f"   –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ: {goal.priority_reason}\n"
        
        # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–º–∞–∫—Å–∏–º—É–º 3)
        if goal.actions:
            goals_text += "\n   <b>–î–µ–π—Å—Ç–≤–∏—è:</b>\n"
            for j, action in enumerate(goal.actions[:3], 1):
                action_text = action.action if isinstance(action, object) and hasattr(action, 'action') else str(action)
                goals_text += f"   {j}. {action_text}\n"
        
        # –†–µ—Å—É—Ä—Å—ã (–±–µ–∑ —ç–º–æ–¥–∑–∏, —Å –∞–≤—Ç–æ—Ä–∞–º–∏)
        if goal.resources:
            goals_text += "\n   <b>–†–µ—Å—É—Ä—Å—ã:</b>\n"
            for res in goal.resources[:2]:
                res_type = res.type.upper() if hasattr(res, 'type') else "–†–ï–°–£–†–°"
                res_title = res.title if hasattr(res, 'title') else str(res)
                res_author = f" ‚Äî {res.author}" if hasattr(res, 'author') and res.author else ""
                goals_text += f"   [{res_type}] {res_title}{res_author}\n"
        
        goals_text += "\n"
    
    # –ü–ª–∞–Ω –Ω–∞ 30 –¥–Ω–µ–π (—Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π)
    timeline_text = "<b>–ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô (30 –î–ù–ï–ô)</b>\n\n"
    
    if pdp.plan_30_days:
        for i, item in enumerate(pdp.plan_30_days, 1):
            # –£–±–∏—Ä–∞–µ–º —ç–º–æ–¥–∑–∏ –∏–∑ –Ω–∞—á–∞–ª–∞
            clean_item = item.lstrip("‚ñ∏‚Ä¢üìö‚úÖüéØ ")
            timeline_text += f"{i}. {clean_item}\n"
    else:
        # Fallback –µ—Å–ª–∏ –Ω–µ—Ç –ø–ª–∞–Ω–∞
        timeline_text += "1. –ò–∑—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã\n"
        timeline_text += "2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º–∏–Ω–∏–º—É–º 2 –ø–æ–¥—Ö–æ–¥–∞\n"
        timeline_text += "3. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç –∫–æ–ª–ª–µ–≥\n"
    
    # –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ)
    metrics_text = "\n<b>–ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê</b>\n\n"
    
    if pdp.success_metrics:
        for i, metric in enumerate(pdp.success_metrics[:4], 1):
            clean_metric = metric.lstrip("‚ñ∏‚Ä¢üìà‚úÖüîÑüìö ")
            metrics_text += f"{i}. {clean_metric}\n"
    else:
        metrics_text += "1. –ü–æ–≤—ã—à–µ–Ω–∏–µ –±–∞–ª–ª–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ\n"
        metrics_text += "2. –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –∫–æ–ª–ª–µ–≥\n"
        metrics_text += "3. –£—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ\n"
    
    # –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
    footer = "\n<i>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø—Ä–æ–π—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.</i>"
    
    return header + goals_text + timeline_text + metrics_text + footer


def format_pdp_short(pdp: PersonalDevelopmentPlan) -> str:
    """–ö—Ä–∞—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç PDP."""
    if not pdp.primary_goals:
        return ""
    
    goals_list = ", ".join([g.metric_name for g in pdp.primary_goals[:3]])
    return f"üéØ –§–æ–∫—É—Å: {goals_list}"

